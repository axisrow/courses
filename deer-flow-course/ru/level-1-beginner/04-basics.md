---
title: "Основы работы"
weight: 4
bookToc: true
---

# Основы работы с DeerFlow

## Введение

Теперь, когда вы попробовали DeerFlow в деле, давайте разберём основные концепции и научимся использовать систему эффективно.

## Структура файловой системы

DeerFlow работает с виртуальной файловой системой. Каждая сессия (разговор) получает собственный набор папок:

```
/mnt/user-data/
├── uploads/      ← сюда попадают загруженные вами файлы
├── workspace/    ← рабочая папка агента (тут он создаёт файлы)
└── outputs/      ← готовые результаты для вас
```

> **Виртуальная файловая система** — это набор папок, который существует внутри контейнера (песочницы). Она изолирована от файлов на вашем компьютере.

## Инструменты агента

DeerFlow использует набор **инструментов** (tools) для выполнения задач:

### Встроенные инструменты

| Инструмент | Описание |
|-----------|----------|
| `web_search` | Поиск в интернете |
| `web_fetch` | Загрузка содержимого веб-страниц |
| `bash` | Запуск команд в терминале |
| `read_file` | Чтение файлов |
| `write_file` | Создание и запись файлов |
| `str_replace` | Замена текста в файлах |
| `ls` | Просмотр содержимого папок |
| `present_files` | Показ готовых файлов пользователю |
| `view_image` | Просмотр изображений |

### Как агент выбирает инструменты

Агент сам решает, какие инструменты использовать. Вам не нужно указывать их вручную — просто опишите задачу, и DeerFlow подберёт подходящий набор.

## Конфигурация: config.yaml

Главный файл настроек — `config.yaml` в корне проекта. Вот его основные разделы:

### Модели

```yaml
models:
  - name: gpt-4o                    # Имя модели
    display_name: GPT-4o            # Отображаемое имя
    use: langchain_openai:ChatOpenAI # Провайдер
    model: gpt-4o                   # Идентификатор модели
    api_key: $OPENAI_API_KEY        # Ключ из переменной окружения
```

> Символ `$` означает, что значение берётся из переменной окружения (файл `.env`).

### Песочница

```yaml
sandbox:
  use: src.sandbox.local:LocalSandboxProvider  # Локальная
  # или
  use: src.community.aio_sandbox:AioSandboxProvider  # Docker
```

## Навыки (Skills)

**Навыки** — это специализированные инструкции, которые расширяют возможности агента. DeerFlow поставляется с набором встроенных навыков:

- **research** — глубокое исследование тем
- **report-generation** — создание отчётов
- **slide-creation** — создание презентаций
- **web-page** — создание веб-страниц
- **image-generation** — генерация изображений

Навыки загружаются **прогрессивно** — только когда они нужны для текущей задачи.

## Расширения: extensions_config.json

Файл `extensions_config.json` управляет дополнительными инструментами:

### MCP-серверы

**MCP** (Model Context Protocol) — это стандарт для подключения внешних инструментов к ИИ-агентам.

```json
{
  "mcpServers": {
    "my-tool": {
      "enabled": true,
      "type": "stdio",
      "command": "npx",
      "args": ["my-mcp-server"]
    }
  }
}
```

## Потоковый вывод (Streaming)

DeerFlow показывает результаты в реальном времени благодаря **потоковому выводу**. Вы видите:

- Какой инструмент вызывается
- Промежуточные результаты
- Прогресс суб-агентов
- Финальный ответ

Это работает через **SSE** (Server-Sent Events) — технологию, которая позволяет серверу отправлять данные браузеру по мере готовности.

## Итоги

- DeerFlow использует виртуальную файловую систему для каждой сессии
- Агент автоматически выбирает нужные инструменты
- Настройки хранятся в `config.yaml` и `extensions_config.json`
- Навыки расширяют возможности агента
- Результаты показываются в реальном времени

В следующем уроке мы решим несколько практических задач.
