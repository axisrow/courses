---
title: "子智能体"
weight: 1
bookToc: true
---

# 子智能体

## 简介

DeerFlow最强大的功能之一是**子智能体**。想象一个项目经理可以雇佣助手并行处理任务的不同部分。这正是子智能体系统的工作方式。

## 子智能体系统如何工作

### 主智能体

**主智能体**是DeerFlow的"大脑"。它接收您的任务并决定是否需要助手。对于复杂任务，它将任务分解为子任务并创建子智能体。

### 子智能体

**子智能体**是一个独立的AI助手，它：
- 在**隔离的上下文**中工作（看不到其他智能体在做什么）
- 拥有自己的**工具集**
- 执行**一个特定的子任务**
- 将**结构化结果**返回给主智能体

### 内置子智能体类型

| 类型 | 说明 | 工具 |
|------|------|------|
| `general-purpose` | 通用助手 | 除委派外的所有工具 |
| `bash` | 命令专家 | 仅bash命令 |

## 工作原理

```
您的请求："比较React、Vue和Angular"
            ↓
主智能体创建3个子智能体：
  ├─ 子智能体1：研究React     ← 并行
  ├─ 子智能体2：研究Vue        ← 工作
  └─ 子智能体3：研究Angular    ← （同时！）
            ↓
收集结果 → 最终比较
```

## 限制

- **最多3个子智能体**同时运行（可配置）
- 每个子智能体**15分钟超时**
- 子智能体**不能**创建自己的子智能体（仅单层）

## `task`工具

主智能体通过`task`工具进行委派：

```
task(
  description="研究React",
  prompt="查找关于React的信息...",
  subagent_type="general-purpose",
  max_turns=10
)
```

## 启用子智能体

在`config.yaml`中：

```yaml
subagents:
  enabled: true
```

## 子智能体生命周期

1. **task_started** — 子智能体已创建并开始工作
2. **task_running** — 执行中（每5秒更新）
3. **task_completed** — 成功完成
4. **task_failed** — 发生错误
5. **task_timed_out** — 超时（15分钟）

所有事件都在界面中实时显示。

## 总结

- 子智能体实现并行任务执行
- 每个子智能体在隔离的上下文中工作
- 最多3个同时运行的子智能体，15分钟超时
- 内置类型：`general-purpose`和`bash`
- 主智能体协调子智能体并收集结果
