---
title: "GSD 如何解决上下文退化问题"
level: 1
lesson: 5
language: zh
tags: [gsd, context-rot, 上下文工程]
---

# GSD 如何解决上下文退化问题

## 介绍

上下文退化（Context rot）是与 AI 代理长时间工作时的最大问题。GSD 从架构层面解决它，而不是靠"更好的提示词"。

## 上下文退化如何发生

1. 开始对话——质量优秀
2. 上下文窗口填充到 50%——质量正常
3. 到 70%+——模型开始"遗忘"早期决策
4. 到 90%+——回复退化，代码出错

## GSD 的解决方案

### 1. 每个任务使用全新上下文

每个计划在单独的子代理中运行，拥有干净的 200k tokens。只有任务和必要的上下文。

### 2. 基于文件的状态而非对话记忆

```
PROJECT.md       → 我们在构建什么（始终加载）
REQUIREMENTS.md  → 需要做什么
ROADMAP.md       → 我们在流程中的位置
STATE.md         → 当前决策和阻碍
PLAN.md          → 具体任务的 XML 结构
```

### 3. 波次执行

独立任务并行运行，依赖任务顺序运行。没有代理被过载。

### 4. 原子提交

每个任务 = 一个提交。如果出问题——回退一个提交，不用在混乱中理清头绪。

## 示例

**没有 GSD：**
```
消息 1:  "创建 API" → 优秀
消息 15: "添加认证" → 还行
消息 40: "修复 bug" → 忘记了一半的架构
```

**使用 GSD：**
```
阶段1，计划1: API 端点 → 全新上下文 → 优秀
阶段1，计划2: 认证 → 全新上下文 → 优秀
阶段2，计划1: Bug 修复 → 全新上下文 → 优秀
```

## 总结

- 上下文退化是长对话中不可避免的问题
- GSD 通过每个任务使用全新上下文来解决
- 状态存储在文件中，而非对话记忆
- 原子提交提供干净的历史记录
- 无论项目规模如何，质量保持稳定
