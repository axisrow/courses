---
title: "GSD 架构"
level: 3
lesson: 1
language: zh
tags: [gsd, 架构, 系统]
---

# GSD 架构

## 介绍

在底层，GSD 是一个由斜杠命令、markdown 文件和多代理编排组成的优雅系统。

## 操作指南

### 系统组件

```
GSD
├── 斜杠命令（用户界面）
├── 编排器（协调）
├── 子代理
│   ├── 研究员（4个并行）
│   ├── 规划师
│   ├── 计划检查器
│   ├── 执行者（并行波次）
│   └── 验证器
├── 状态（.planning/）
│   ├── PROJECT.md
│   ├── REQUIREMENTS.md
│   ├── ROADMAP.md
│   ├── STATE.md
│   ├── config.json
│   └── 阶段文件
└── Git 集成（原子提交）
```

### 波次执行

计划按依赖关系分组为"波次"：
- **波次 1**：独立计划 → 并行
- **波次 2**：依赖波次 1 → 等待，然后并行
- **波次 3**：依赖波次 2 → 依此类推

### 子代理生命周期

1. 编排器创建带有所需上下文的提示词
2. 子代理在全新上下文窗口中启动
3. 执行任务
4. 将结果返回给编排器
5. 编排器集成并继续前进

### 文件系统作为数据库

GSD 不使用数据库。所有状态都是 markdown 文件。这提供了：
- 通过 git 进行版本控制
- 人类可读性
- 易于调试
- 可移植性

## 示例

阶段执行期间的典型上下文使用：
```
主窗口:    30-40%（编排）
研究员:    20-50%（研究）
规划师:    30-60%（规划）
执行者:    40-80%（代码）
```

## 总结

- GSD = 斜杠命令 + 编排器 + 子代理 + 文件状态
- 波次执行最大化并行性
- 每个子代理获得全新上下文
- 文件作为数据库——简单、版本化、可读
