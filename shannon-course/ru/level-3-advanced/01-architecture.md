---
title: "Архитектура Shannon"
weight: 1
bookToc: true
---

# Архитектура Shannon

## Введение

Shannon — не один «бот», а система из нескольких специализированных AI-агентов, работающих вместе. Разберём, как устроена эта система.

## Общая схема

```
                ┌──────────────────────┐
                │    Разведка          │
                └──────────┬───────────┘
                           │
                           ▼
            ┌──────────────┼──────────────┐
            ▼              ▼              ▼
    ┌──────────────┐ ┌──────────────┐ ┌──────────┐
    │ Анализ       │ │ Анализ       │ │   ...    │
    │ (Injection)  │ │ (XSS)        │ │          │
    └──────┬───────┘ └──────┬───────┘ └────┬─────┘
           ▼                ▼              ▼
    ┌──────────────┐ ┌──────────────┐ ┌──────────┐
    │ Эксплуатация │ │ Эксплуатация │ │   ...    │
    │ (Injection)  │ │ (XSS)        │ │          │
    └──────┬───────┘ └──────┬───────┘ └────┬─────┘
           │                │              │
           └────────┬───────┴──────────────┘
                    ▼
            ┌──────────────────────┐
            │      Отчёт           │
            └──────────────────────┘
```

## Фаза 1: Разведка (Reconnaissance)

**Что происходит:** Shannon строит карту приложения.

- Анализирует исходный код (структуру файлов, фреймворки, технологии)
- Сканирует через Nmap, Subfinder, WhatWeb
- Исследует приложение через браузер
- Находит все точки входа: API-эндпоинты, формы, параметры URL

**Результат:** Подробная карта поверхности атаки.

## Фаза 2: Анализ уязвимостей (Vulnerability Analysis)

**Что происходит:** Специализированные агенты параллельно ищут уязвимости каждого типа.

- Агент по Injection анализирует потоки данных от пользовательского ввода до SQL-запросов
- Агент по XSS ищет места, где данные выводятся без экранирования
- Агент по SSRF проверяет, где сервер делает внешние запросы
- И так далее для каждой категории

**Ключевое слово: параллельно.** Все агенты работают одновременно, что ускоряет процесс.

**Результат:** Список гипотез — «здесь, вероятно, есть уязвимость».

## Фаза 3: Эксплуатация (Exploitation)

**Что происходит:** Отдельные агенты пытаются доказать каждую гипотезу.

- Используют браузер, командную строку, кастомные скрипты
- Выполняют реальные атаки на работающее приложение
- Если эксплойт не удался — гипотеза отбрасывается

**Правило:** «Нет эксплойта — нет отчёта». Только доказанные уязвимости идут дальше.

## Фаза 4: Отчёт (Reporting)

**Что происходит:** Финальный агент собирает все доказанные находки.

- Очищает артефакты и шум
- Формирует структурированный отчёт
- Добавляет PoC для каждой уязвимости

## Технологический стек

- **Anthropic Claude Agent SDK** — ядро для AI-рассуждений
- **Temporal** — оркестрация workflow
- **Docker** — изоляция и воспроизводимость
- **Playwright/Browser automation** — управление браузером
- **Nmap, Subfinder, WhatWeb, Schemathesis** — инструменты разведки

## Итоги

- Shannon — мультиагентная система с 4 фазами
- Агенты работают параллельно для скорости
- Каждая фаза передаёт результаты следующей
- Строгое правило «нет эксплойта — нет отчёта» устраняет ложные срабатывания
