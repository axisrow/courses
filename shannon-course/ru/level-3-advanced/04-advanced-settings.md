---
title: "Продвинутые настройки"
weight: 4
bookToc: true
---

# Продвинутые настройки

## Введение

Разберём продвинутые возможности Shannon: альтернативные провайдеры, управление воркспейсами и оптимизация работы.

## Router Mode: альтернативные AI-провайдеры

Shannon оптимизирован для Anthropic Claude, но экспериментально поддерживает другие модели:

```bash
# В файле .env
OPENAI_API_KEY=sk-...
ROUTER_DEFAULT=openai,gpt-5.2

# Или через OpenRouter
OPENROUTER_API_KEY=sk-or-...
ROUTER_DEFAULT=openrouter,google/gemini-3-flash-preview
```

Запуск:

```bash
./shannon start URL=https://app.com REPO=app ROUTER=true
```

> ⚠️ **Это экспериментальная функция.** Качество результатов зависит от модели. Некоторые модели могут не пройти ранние фазы (разведку).

## Управление токенами

```bash
# Рекомендуемая настройка
CLAUDE_CODE_MAX_OUTPUT_TOKENS=64000
```

Увеличение лимита токенов позволяет агентам генерировать более подробные отчёты.

## Воркспейсы: продвинутое использование

### Просмотр всех воркспейсов

```bash
./shannon workspaces
```

### Именованные воркспейсы для организации

```bash
# Аудит Q1
./shannon start URL=https://app.com REPO=app WORKSPACE=q1-audit

# Аудит после исправлений
./shannon start URL=https://app.com REPO=app WORKSPACE=q1-fix-verification
```

### Возобновление прерванных тестов

```bash
# Shannon определит завершённых агентов и продолжит с того же места
./shannon start URL=https://app.com REPO=app WORKSPACE=q1-audit
```

Каждый агент сохраняет прогресс через git-коммиты, поэтому возобновление начинается с чистого состояния.

## Temporal Web UI

Для детального мониторинга откройте `http://localhost:8233`. Здесь видно:

- Статус каждого workflow
- Какие агенты завершили работу
- Время выполнения каждой фазы
- Ошибки и ретраи

## Оптимизация стоимости

- Типичный запуск стоит ~$50 на Claude 4.5 Sonnet
- Для экономии можно использовать Router Mode с более дешёвыми моделями (с потерей качества)
- Воркспейсы экономят деньги: при сбое не нужно перезапускать весь тест

## Работа с Windows

- Используйте WSL2 для лучшей совместимости
- Windows Defender может ругаться на файлы отчётов (это ложные срабатывания из-за PoC-кода)
- Добавьте папку Shannon в исключения антивируса

## Итоги

- Router Mode позволяет экспериментировать с другими AI-моделями
- Воркспейсы позволяют организовывать и возобновлять тесты
- Temporal UI даёт детальный мониторинг
- Управление токенами и выбор модели влияют на стоимость и качество
