---
title: "Векторные базы данных и система памяти"
weight: 13
bookToc: true
---

# Векторные базы данных и система памяти

## Зачем векторные базы?

Обычные базы ищут по точному совпадению. Но память — вещь нечёткая: «Пользователь любит итальянскую кухню» должно находиться по запросу «рекомендации ресторанов». **Векторные базы** хранят текст как числовые векторы и находят похожие по смыслу.

## Двойной подход Sentient

| База | Назначение |
|---|---|
| **PostgreSQL + pgvector** | Основное хранилище с полными возможностями SQL. |
| **ChromaDB** | Быстрый семантический поиск. |

## Как создаются воспоминания

1. AI выделяет важные факты из разговора.
2. Модуль `memories` извлекает и дедуплицирует их.
3. Каждое воспоминание превращается в **векторное представление** (список чисел).
4. Вектор и текст сохраняются в pgvector и ChromaDB.

## Как воспоминания извлекаются

1. Ваше новое сообщение превращается в вектор.
2. Обе базы ищут **наиболее похожие** воспоминания.
3. Лучшие результаты добавляются в контекст AI.
4. AI использует контекст для персонализации ответа.

## Настройка

- **Top-K** — сколько воспоминаний извлекать (обычно 5–10).
- **Порог сходства** — игнорировать нерелевантные воспоминания.
- **Смещение к новизне** — предпочитать свежие воспоминания.

## Удаление

```bash
python src/server/delete_pg_memories.py
python src/server/delete_chroma_collection.py
```

## Итог

Векторные базы — фундамент персонализации Sentient. Они обеспечивают нечёткий поиск по смыслу.
