---
title: "Безопасность, аутентификация и self-hosting"
weight: 14
bookToc: true
---

# Безопасность, аутентификация и self-hosting

## Аутентификация

Sentient использует **JWT (JSON Web Tokens)**:
- Логика в `src/server/main/auth/`.
- Токены подписываются библиотекой `python-jose`.
- Каждый запрос содержит JWT в заголовке.

## OAuth для интеграций

При подключении внешнего сервиса:
1. Вы нажимаете «Connect» и перенаправляетесь на страницу авторизации сервиса.
2. Сервис возвращает **access token** и **refresh token**.
3. Sentient хранит токены в базе данных.
4. Токены обновляются автоматически.

## Лучшие практики self-hosting

### Docker Compose
Используйте `src/docker-compose.selfhost.yml` — рекомендуемый способ.

### Переменные окружения
- Никогда не коммитьте `.env` в Git.
- Используйте сильные пароли для `SECRET_KEY` и баз данных.

### Сеть
- Используйте **обратный прокси** (nginx включён в Dockerfile).
- Включите **HTTPS** (Let's Encrypt — бесплатно).
- Ограничьте порты баз данных внутренней сетью.

### Конфиденциальность
- Все данные хранятся локально.
- С Ollama данные не покидают вашу сеть.

## Чек-лист для продакшена

- [ ] HTTPS с валидным сертификатом.
- [ ] Пароли баз данных изменены.
- [ ] Redis защищён паролем.
- [ ] Регулярные бэкапы базы данных.
- [ ] Файрвол настроен.
- [ ] Мониторинг и логирование включены.

## Итог

JWT, OAuth и self-hosting делают Sentient безопасным решением. Следуйте чек-листу для надёжного развёртывания.
