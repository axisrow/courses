---
title: "树搜索与信息检索"
weight: 2
bookToc: true
---

# 树搜索与信息检索

## 从树到答案

一旦 PageIndex 构建好树结构，就进入第二阶段：使用树来查找与用户问题相关的信息。这就是**树搜索**。

## 树搜索的工作原理

树搜索的灵感来自 **AlphaGo**——那个击败围棋世界冠军的 AI。就像 AlphaGo 评估棋盘上的可能走法一样，PageIndex 评估文档树中的可能路径。

搜索过程自上而下：

1. **从根节点开始** — 查看所有顶层章节
2. **评估相关性** — 大语言模型阅读章节标题和摘要，推理哪些章节可能包含答案
3. **进入最有希望的分支** — 深入树的下一层
4. **重复** — 继续直到找到最具体、最相关的章节
5. **提取内容** — 从定位到的页面中获取实际文本

## 示例演示

**问题**：*"公司第三季度的收入增长率是多少？"*

```
2023年年报
├── 致股东信              → 可能相关
├── 公司概况              → 不太可能
├── 财务报表              → 很可能 ✓
│   ├── 利润表            → 很可能 ✓
│   │   ├── 季度明细      → 最相关 ✓✓
│   │   └── 年度汇总      → 相关性较低
│   ├── 资产负债表        → 不相关
│   └── 现金流量表        → 不相关
└── 风险因素              → 不相关
```

大语言模型在每一层进行推理，迅速缩小范围到"利润表"中的"季度明细"。

## 为什么比平面搜索更好

| 平面搜索 | 树搜索 |
|---------|--------|
| 搜索全部 300 页 | 搜索 3-4 层树结构 |
| 返回脱离上下文的片段 | 返回包含上下文的完整章节 |
| 无法解释为什么选择某个结果 | 展示推理路径 |
| 容易遗漏附近的相关内容 | 捕获整个相关章节 |

## 摘要的作用

树中每个节点都包含一个**摘要**——对该章节内容的简要描述。摘要对树搜索至关重要，因为它们帮助大语言模型做出决策，而不需要阅读每个章节的全文。

## 带上下文的检索

当 PageIndex 定位到相关章节时，它不只返回一小段文字，而是返回包含**完整上下文**的内容：

- 它属于哪个章节
- 覆盖哪些页码
- 在整个文档结构中的位置

这些上下文让 AI 的最终回答更准确、更可追溯。

## 总结

树搜索使用大语言模型的推理能力逐层导航文档层级，快速到达最相关的章节。结合节点摘要和完整上下文提取，产生比传统平面搜索更准确、更可解释的结果。
