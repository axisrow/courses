---
title: "Условная логика"
weight: 9
bookToc: true
---

# Условная логика

## Ветвление workflow

Не все данные должны идти одним путём. Условная логика направляет элементы по правилам.

## Нод IF

Два выхода: **True** и **False**.

### Условия
- **String**: равно, содержит, начинается с, заканчивается на, regex
- **Number**: равно, больше, меньше, между
- **Boolean**: true, false

### Пример
```
Условие: {{ $json.amount }} > 100
True  → На утверждение руководителю
False → Автоматическое одобрение
```

### Комбинация условий
- **AND** — все условия должны быть истинны
- **OR** — хотя бы одно

## Нод Switch

Несколько выходов на основе значения.

```
Поле: {{ $json.priority }}
Выход 0: "low"    → Запись в таблицу
Выход 1: "medium" → Письмо
Выход 2: "high"   → Алерт в Slack + письмо
Fallback:          → Пропустить
```

## Нод Merge

Объединение ветвей после разделения.

### Режимы
- **Append** — соединить все элементы
- **Combine** — сопоставить по позиции или по полю
- **Choose Branch** — пропустить только одну ветвь

## Нод Filter

Один выход: проходят только подходящие элементы.

```
Фильтр: {{ $json.status }} equals "active"
```

## Циклы

### Split In Batches
Обработка больших наборов данных пакетами:
1. Задайте размер пакета (например, 10)
2. Обработайте
3. Подключите обратно к Split In Batches

## Практический пример: маршрутизация писем

```
Email Trigger
  → IF (от VIP-отправителя?)
    → True: Slack-алерт
    → False:
      → Switch (тема содержит?)
        → "счёт"   → Папка бухгалтерии
        → "поддержка" → Создать тикет
        → Fallback → Архив
```

## Практика

1. Manual Trigger с 5 элементами (имя, возраст, страна)
2. Filter: возраст > 20
3. Switch: маршрутизация по стране
4. Merge: объединить результаты

## Итог

Вы освоили ветвление. Далее — работа с базами данных.
