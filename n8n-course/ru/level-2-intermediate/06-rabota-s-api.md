---
title: "Работа с API"
weight: 6
bookToc: true
---

# Работа с API

## Что такое API?

API — способ общения двух программ. Когда n8n подключается к Slack или Google Sheets, он использует их API.

## HTTP Request — универсальный нод

### HTTP-методы

| Метод | Назначение | Пример |
|-------|-----------|--------|
| **GET** | Чтение | Получить список пользователей |
| **POST** | Создание | Добавить запись |
| **PUT** | Обновление | Изменить имя |
| **DELETE** | Удаление | Удалить запись |

### GET-запрос
1. Добавьте **HTTP Request**
2. Метод: **GET**
3. URL: `https://jsonplaceholder.typicode.com/posts/1`
4. **Execute Step**

### POST-запрос
1. Метод: **POST**
2. URL: `https://jsonplaceholder.typicode.com/posts`
3. Body Content Type: **JSON**
4. Body:
```json
{
  "title": "Мой пост",
  "body": "Привет из n8n!",
  "userId": 1
}
```

## Аутентификация

### API-ключ
Заголовок `Authorization: Bearer YOUR_KEY` или параметр `?api_key=YOUR_KEY`.

### OAuth2
Для Google, Slack, GitHub:
1. **Settings → Credentials**
2. **Add Credential** → выберите сервис
3. Пройдите авторизацию

### Учётные данные в n8n
- Создаёте один раз, используете в разных workflow
- Ключи зашифрованы

## Работа с JSON

Доступ к полям через выражения:
- `{{ $json.title }}` — поле title
- `{{ $json.data.items[0].name }}` — вложенные данные
- `{{ $json.results.length }}` — количество элементов

## Пагинация

Для получения всех данных включите пагинацию в настройках HTTP Request.

## Обработка ошибок API

- **401** — неверная аутентификация
- **404** — ресурс не найден
- **429** — превышен лимит запросов
- **500** — ошибка сервера

Включите **Continue on Fail** для обработки ошибок.

## Практика

1. Получите данные о погоде из бесплатного API
2. Извлеките температуру и описание
3. Сформатируйте в читаемое сообщение

## Итог

Вы умеете работать с любым API. Далее — преобразование данных.
