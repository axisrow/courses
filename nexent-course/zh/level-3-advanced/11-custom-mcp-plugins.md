---
title: "构建自定义 MCP 插件"
weight: 11
bookToc: true
---

# 构建自定义 MCP 插件

## 为什么要构建自定义插件？

Nexent 自带很多工具，但您可能需要连接自己的系统——比如 CRM、内部数据库或自定义接口。MCP 插件可以让您扩展 Nexent 的能力。

## 什么是 MCP 插件？

MCP 插件是一个遵循模型上下文协议（Model Context Protocol）规范的 Python 服务。它提供一个或多个**工具**，供智能体在对话中调用。

## 插件结构

一个典型的 MCP 插件包含：

```
my-plugin/
├── server.py       # 主服务文件
├── requirements.txt
└── README.md
```

## 创建一个简单的插件

下面是一个简单的例子——返回当前日期的工具：

```python
from datetime import date

def get_today():
    """返回今天的日期，格式为 YYYY-MM-DD。"""
    return {"date": str(date.today())}
```

实际使用时，您需要将它封装成 Nexent 可以通信的 MCP 兼容服务。

## 注册插件

1. 将插件部署为服务（本地或服务器上）。
2. 在 Nexent 中进入 **设置 → 工具 → 添加远程 MCP 工具**。
3. 输入插件运行的 URL。
4. Nexent 会自动发现可用工具，供智能体选择使用。

## 最佳实践

- **一个工具做一件事。** 保持简单和专注。
- **写好描述。** AI 会读取描述来决定何时使用工具。
- **处理错误。** 返回有用的错误信息。
- **注意安全。** 不要在工具响应中暴露敏感信息。

## 测试插件

1. 在本地运行插件。
2. 在 Nexent 中注册。
3. 创建一个可以使用该工具的智能体。
4. 提问触发工具调用。
5. 验证响应是否包含插件返回的数据。

## 练习

构建一个返回随机励志名言的 MCP 插件。在 Nexent 中注册它，并创建一个智能体，让它在被问到时分享每日名言。
