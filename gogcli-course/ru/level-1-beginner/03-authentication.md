---
title: "Настройка аутентификации"
weight: 3
bookToc: true
---

# Настройка аутентификации

Перед тем как gogcli сможет работать с вашими данными Google, нужно дать ему разрешение. Это делается один раз.

## Шаг 1: Создайте учётные данные OAuth2

1. Откройте [Google Cloud Console](https://console.cloud.google.com/apis/credentials)
2. Создайте новый проект (любое имя, например «gogcli»)
3. Включите нужные API:
   - Gmail API
   - Google Calendar API
   - Google Drive API
4. Настройте **экран согласия OAuth** — выберите «Внешний» и заполните обязательные поля
5. Если приложение в режиме «Тестирование», добавьте свою почту как тестового пользователя
6. Создайте **клиент OAuth**:
   - Тип: «Приложение для ПК»
   - Скачайте JSON-файл

## Шаг 2: Сохраните учётные данные

```bash
gog auth credentials ~/Downloads/client_secret_XXXXX.json
```

## Шаг 3: Авторизуйте аккаунт

```bash
gog auth add you@gmail.com
```

Откроется браузер с запросом на вход и подтверждение разрешений. После одобрения gogcli сохранит токен обновления в безопасном хранилище вашей ОС.

### Нет браузера? Используйте ручной режим

```bash
gog auth add you@gmail.com --services user --manual
```

Команда выведет URL. Откройте его в любом браузере, одобрите доступ, затем вставьте URL-перенаправление обратно в терминал.

## Шаг 4: Проверьте

```bash
export GOG_ACCOUNT=you@gmail.com
gog gmail labels list
```

Если вы видите список ярлыков Gmail (INBOX, SENT, SPAM) — аутентификация работает!

## Где хранятся токены?

- **macOS**: Keychain Access
- **Linux**: GNOME Keyring или KWallet
- **Windows**: Диспетчер учётных данных

Если системное хранилище недоступно, используется зашифрованный файл:

```bash
export GOG_KEYRING_PASSWORD='ваш-секретный-пароль'
```

## Проверка статуса

```bash
gog auth status    # Текущее состояние аутентификации
gog auth list      # Все сохранённые аккаунты
```

## Далее

В следующем уроке вы выполните свои первые команды в gogcli.
