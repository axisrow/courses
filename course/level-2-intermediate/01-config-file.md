# Урок 1. Файл настроек OpenClaw

## Зачем это нужно

Когда вы только начинаете работать с OpenClaw, всё работает «из коробки» — с настройками по умолчанию. Но рано или поздно вам захочется что-то изменить: подключить мессенджер, выбрать другую AI-модель, настроить расписание. Для всего этого существует **файл настроек** — один файл, в котором хранятся все параметры вашего ассистента.

Это как пульт управления: один файл — и вы управляете всем поведением OpenClaw.

---

## Что такое openclaw.json

**openclaw.json** — это текстовый файл в формате JSON5 (улучшенный JSON, который позволяет писать комментарии и ставить запятую после последнего элемента). В нём описаны все настройки: какие мессенджеры подключены, какая AI-модель используется, какие инструменты доступны и многое другое.

### Где он лежит

Файл находится по адресу:

```
~/.openclaw/openclaw.json
```

> **Что значит `~`?** Это сокращение для «домашней папки» вашего пользователя. На Mac это `/Users/ваше_имя/`, на Linux — `/home/ваше_имя/`.

Если файла нет — это нормально! OpenClaw будет работать с настройками по умолчанию.

---

## Как редактировать настройки

У вас есть **четыре способа** изменить настройки. Выбирайте тот, который вам удобнее:

### Способ 1: Мастер настройки (самый простой)

Запустите в терминале:

```bash
openclaw onboard
```

Это интерактивный помощник, который задаст вопросы и сам создаст правильный файл настроек.

Для быстрой настройки конкретного раздела:

```bash
openclaw configure
```

### Способ 2: Команды в терминале (одной строкой)

Если нужно изменить что-то конкретное:

```bash
# Посмотреть текущее значение
openclaw config get agents.defaults.workspace

# Установить новое значение
openclaw config set agents.defaults.heartbeat.every "2h"

# Удалить настройку
openclaw config unset tools.web.search.apiKey
```

### Способ 3: Веб-интерфейс

Откройте в браузере:

```
http://127.0.0.1:18789
```

Перейдите на вкладку **Config** — там удобная форма с полями, а также редактор для «сырого» JSON.

### Способ 4: Редактирование файла напрямую

Откройте файл `~/.openclaw/openclaw.json` в любом текстовом редакторе и измените нужные параметры.

---

## Как выглядит файл настроек

Вот пример минимального файла:

```json5
// ~/.openclaw/openclaw.json
{
  // Настройки агента
  agents: {
    defaults: {
      workspace: "~/.openclaw/workspace"
    }
  },

  // Подключение мессенджера
  channels: {
    whatsapp: {
      allowFrom: ["+15555550123"]
    }
  }
}
```

> **Комментарии** (строки, начинающиеся с `//`) — это подсказки для вас. OpenClaw их игнорирует.

---

## Горячая перезагрузка — что это и как работает

**Горячая перезагрузка** (hot reload) — это когда OpenClaw сам замечает, что вы изменили файл настроек, и применяет изменения **без перезапуска**. Вам не нужно останавливать и заново запускать программу!

### Режимы перезагрузки

| Режим | Что делает |
|-------|-----------|
| **hybrid** (по умолчанию) | Безопасные изменения применяет мгновенно. Если нужен перезапуск — делает это автоматически |
| **hot** | Применяет только безопасные изменения. Если нужен перезапуск — предупредит, но сам не перезапустит |
| **restart** | Перезапускает OpenClaw при любом изменении |
| **off** | Не следит за файлом. Изменения применятся только при ручном перезапуске |

### Что применяется мгновенно (без перезапуска)

- Настройки мессенджеров (`channels`)
- Настройки агента и моделей (`agents`, `models`)
- Автоматизация (`hooks`, `cron`, `heartbeat`)
- Сессии и сообщения
- Инструменты и медиа

### Что требует перезапуска

- Настройки сервера Gateway (`gateway.*` — порт, адрес, авторизация)
- Инфраструктура (`discovery`, `plugins`)

---

## Переменные окружения

Вместо того чтобы писать секретные ключи прямо в файле настроек, вы можете использовать **переменные окружения** — специальные именованные значения, которые хранятся отдельно.

OpenClaw читает переменные из:

- Файла `.env` в текущей папке
- Файла `~/.openclaw/.env`

Пример использования в настройках:

```json5
{
  gateway: {
    auth: {
      token: "${OPENCLAW_GATEWAY_TOKEN}"
    }
  }
}
```

Здесь `${OPENCLAW_GATEWAY_TOKEN}` будет заменено на реальное значение из переменной окружения.

---

## Проверка настроек

Если вы допустили ошибку в файле настроек, OpenClaw **не запустится** и покажет, что именно не так. Чтобы найти и исправить проблемы:

```bash
# Показать проблемы
openclaw doctor

# Автоматически исправить
openclaw doctor --fix
```

---

## Итоги урока

- **openclaw.json** — главный файл настроек OpenClaw, лежит в `~/.openclaw/`
- Есть 4 способа редактирования: мастер, команды, веб-интерфейс, прямое редактирование
- **Горячая перезагрузка** позволяет менять большинство настроек без перезапуска
- Секретные ключи лучше хранить в переменных окружения (файл `.env`)
- Если что-то сломалось — `openclaw doctor` поможет найти и исправить ошибки

---

*Следующий урок: [Выбор AI-модели](02-models.md)*
