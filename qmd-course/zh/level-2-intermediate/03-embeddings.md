---
title: "嵌入向量与语义搜索"
weight: 8
bookToc: true
---

# 嵌入向量与语义搜索

## 什么是嵌入向量？

**嵌入向量**是将文本转换为一组数字的方法，这些数字能捕捉文本的含义。含义相似的文档会得到相似的数字，即使用词完全不同。

例如：
- "如何部署应用"和"应用发布流程"——嵌入向量非常相似
- "如何部署应用"和"最佳饼干配方"——嵌入向量差异很大

## 生成嵌入向量

```sh
qmd embed
```

这会通过本地 AI 模型 EmbeddingGemma 处理所有文档。

## 重新生成

```sh
# 仅处理新增/修改的文档
qmd embed

# 强制重新处理所有文档
qmd embed -f
```

## 分块机制

长文档会被分成约 900 个 token（约 700 个单词）的片段：

- 优先在标题和段落边界处分割
- 代码块保持完整
- 片段之间有 15% 的重叠

## 何时使用哪种搜索

| 模式 | 适用场景 |
|------|----------|
| `qmd search` | 知道确切的词，需要速度 |
| `qmd vsearch` | 按含义搜索，不知道确切词语 |
| `qmd query` | 想要最佳结果，不在乎速度 |

## 检查索引

```sh
qmd status
```

## 下一步

学习如何将 QMD 与 AI 代理和 MCP 协议配合使用。
