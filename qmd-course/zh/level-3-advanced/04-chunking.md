---
title: "智能分块算法"
weight: 14
bookToc: true
---

# 智能分块算法

## 什么是分块？

当你把一份长文档存入QMD时，系统不会把它当作一个整体来处理。相反，它会把文档切成更小的片段——这就叫**分块（chunking）**。

为什么要这样做？因为AI模型每次只能处理有限的文字。把长文档切成小块，搜索时就能精确找到最相关的那一段，而不是返回整篇文章。

## 分块的方式

QMD支持几种分块策略：

### 按段落分块

最简单的方式。每个自然段落变成一个独立的块。适合结构清晰的文章。

### 按固定长度分块

每隔一定字数切一刀。比如每500个字一块。简单但可能会在句子中间断开。

### 智能分块

QMD的默认方式。它会考虑：
- 标题和章节结构
- 段落边界
- 列表和表格的完整性

这样每个块都是一个有意义的完整内容。

## 块大小的选择

- **太小**（100字以下）：信息碎片化，搜索结果缺少上下文
- **太大**（2000字以上）：搜索不够精确，浪费模型的处理能力
- **推荐**：300-800字之间，根据你的内容类型调整

## 重叠设置

相邻的块之间可以有一些重叠的内容。比如前一个块的最后两句话，也出现在下一个块的开头。这样做的好处是不会丢失跨段落的信息。

## 实际建议

1. 先用默认设置试试，大多数情况下效果不错
2. 如果搜索结果经常缺少上下文，考虑增大块的大小
3. 如果搜索结果太笼统，考虑减小块的大小
4. 技术文档通常适合较小的块，叙事性内容适合较大的块

## 小结

分块是影响搜索质量的关键因素。好的分块策略能让你用简单的问题就找到精确的答案。不需要一开始就完美——可以根据实际使用效果逐步调整。
