---
title: "Hash-Anchored Edits (Hashline)"
level: 2
lesson: 1
lang: ru
tags: [hashline, редактирование, хеши]
---

# Hash-Anchored Edits (Hashline)

## Введение

Hashline — одна из ключевых инноваций OMP. Каждой строке файла присваивается короткий хеш-якорь. Модель ссылается на якоря вместо воспроизведения текста.

## Проблема

При обычном подходе (str_replace) модель должна точно воспроизвести исходный текст для замены. Это часто приводит к ошибкам:

- Лишние/недостающие пробелы
- «Строка не найдена»
- Неоднозначные совпадения

## Как работает Hashline

1. При чтении файла каждая строка получает короткий хеш (например, `#a3f`)
2. Модель указывает диапазон хешей для редактирования
3. Если файл изменился — хеши не совпадут и правка отклоняется **до** повреждения данных

## Результаты бенчмарков

- **Grok Code Fast 1**: с 6.7% до 68.3% — десятикратное улучшение
- **Gemini 3 Flash**: +5pp по сравнению с str_replace
- **Grok 4 Fast**: на 61% меньше выходных токенов
- **MiniMax**: удвоение процента успешных правок

## Пример использования

Вы просто работаете как обычно — hashline активен по умолчанию:

```
> Добавь обработку ошибок в функцию parseConfig в src/config.ts
```

Модель прочитает файл, увидит хеш-якоря и сделает точную правку.

## Итоги

Hashline устраняет типичные проблемы текстового редактирования, делая AI-правки файлов надёжными.
