# –£—Ä–æ–∫ 1: –•—É–∫–∏ (Hooks) ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç —Å–æ–±—ã—Ç–∏–π

## –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤—ã –Ω–∞–Ω—è–ª–∏ –ø–æ–º–æ—â–Ω–∏–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–¥–æ–º. –•—É–∫–∏ ‚Äî —ç—Ç–æ –∫–∞–∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –æ—Å—Ç–∞–≤–ª—è–µ—Ç–µ —ç—Ç–æ–º—É –ø–æ–º–æ—â–Ω–∏–∫—É: ¬´–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ —É–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª ‚Äî –ø—Ä–æ–≤–µ—Ä—å –¥–≤–∞–∂–¥—ã¬ª, ¬´–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è ‚Äî —É–±–µ–¥–∏—Å—å, —á—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–ª–æ–º–∞–ª–æ—Å—å¬ª. 

**–•—É–∫** (–æ—Ç –∞–Ω–≥–ª. hook ‚Äî ¬´–∫—Ä—é—á–æ–∫¬ª) ‚Äî —ç—Ç–æ —Å–∫—Ä–∏–ø—Ç –∏–ª–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —Ä–∞–±–æ—Ç—ã Claude Code. –•—É–∫–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç:

- üõ°Ô∏è –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ–ø–∞—Å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É–¥–∞–ª–µ–Ω–∏–µ –≤–∞–∂–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ–¥ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
- üìã –î–æ–±–∞–≤–ª—è—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ –Ω–∞—á–∞–ª–µ —Å–µ—Å—Å–∏–∏
- üîç –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—Ç—ã

## –ö–æ–≥–¥–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç —Ö—É–∫–∏

Claude Code –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ **—Å–æ–±—ã—Ç–∏–π** (–º–æ–º–µ–Ω—Ç–æ–≤), –∫ –∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–Ω–æ ¬´–ø—Ä–∏—Ü–µ–ø–∏—Ç—å¬ª —Ö—É–∫:

| –°–æ–±—ã—Ç–∏–µ | –ö–æ–≥–¥–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç | –î–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|---------|-------------------|----------------------|
| `SessionStart` | –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Å—Å–∏–∏ | –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ |
| `UserPromptSubmit` | –ö–æ–≥–¥–∞ –≤—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ –∑–∞–ø—Ä–æ—Å | –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å |
| `PreToolUse` | **–ü–µ—Ä–µ–¥** –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –¥–µ–π—Å—Ç–≤–∏—è | –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ–ø–∞—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ |
| `PostToolUse` | **–ü–æ—Å–ª–µ** –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç |
| `Stop` | –ö–æ–≥–¥–∞ Claude –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É | –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å—ë —Å–¥–µ–ª–∞–Ω–æ |
| `SessionEnd` | –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–µ—Å—Å–∏–∏ | –û—á–∏—Å—Ç–∫–∞, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ |

## –î–≤–∞ —Ç–∏–ø–∞ —Ö—É–∫–æ–≤

### 1. –ö–æ–º–∞–Ω–¥–Ω—ã–µ —Ö—É–∫–∏ (command)

–ó–∞–ø—É—Å–∫–∞—é—Ç —Å–∫—Ä–∏–ø—Ç (–ø—Ä–æ–≥—Ä–∞–º–º—É). –ü–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö, —Ç–æ—á–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫:

```json
{
  "type": "command",
  "command": "bash ./scripts/check.sh",
  "timeout": 10
}
```

### 2. –ü—Ä–æ–º–ø—Ç-—Ö—É–∫–∏ (prompt) ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –≤–∞—Ä–∏–∞–Ω—Ç

–ò—Å–ø–æ–ª—å–∑—É—é—Ç –ò–ò –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–∏—Ç—É–∞—Ü–∏–∏. –ü–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫:

```json
{
  "type": "prompt",
  "prompt": "–ü—Ä–æ–≤–µ—Ä—å, –±–µ–∑–æ–ø–∞—Å–Ω–∞ –ª–∏ —ç—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏—è —Å —Ñ–∞–π–ª–æ–º. –í–µ—Ä–Ω–∏ 'approve' –∏–ª–∏ 'deny'.",
  "timeout": 30
}
```

## –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ö—É–∫–æ–≤

### –®–∞–≥ 1: –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ö—É–∫–∏

–•—É–∫–∏ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö:

- **–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** ‚Äî —Ñ–∞–π–ª `.claude/settings.json` (–¥–µ–π—Å—Ç–≤—É–µ—Ç –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤)
- **–í –ø–ª–∞–≥–∏–Ω–µ** ‚Äî —Ñ–∞–π–ª `hooks/hooks.json` –≤–Ω—É—Ç—Ä–∏ –ø–∞–ø–∫–∏ –ø–ª–∞–≥–∏–Ω–∞

### –®–∞–≥ 2: –°–æ–∑–¥–∞—ë–º –ø—Ä–æ—Å—Ç–æ–π —Ö—É–∫ ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ–ø–∞—Å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.claude/settings.json` –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ:

```json
{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "bash .claude/hooks/block-rm.sh"
          }
        ]
      }
    ]
  }
}
```

–¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `.claude/hooks/block-rm.sh`:

```bash
#!/bin/bash
# –ß–∏—Ç–∞–µ–º –¥–∞–Ω–Ω—ã–µ –æ –∫–æ–º–∞–Ω–¥–µ, –∫–æ—Ç–æ—Ä—É—é —Ö–æ—á–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å Claude
COMMAND=$(cat | jq -r '.tool_input.command')

# –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç rm -rf ‚Äî –±–ª–æ–∫–∏—Ä—É–µ–º!
if echo "$COMMAND" | grep -q 'rm -rf'; then
  echo '{"hookSpecificOutput": {"permissionDecision": "deny", "permissionDecisionReason": "–û–ø–∞—Å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ rm -rf –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ —Ö—É–∫–æ–º"}}' 
else
  exit 0  # –í—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ, —Ä–∞–∑—Ä–µ—à–∞–µ–º
fi
```

### –®–∞–≥ 3: –•—É–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏–∑ –ø–ª–∞–≥–∏–Ω–∞ security-guidance

–ü–ª–∞–≥–∏–Ω `security-guidance` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ö—É–∫, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤:

```json
{
  "description": "Security reminder hook",
  "hooks": {
    "PreToolUse": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "python3 ${CLAUDE_PLUGIN_ROOT}/hooks/security_reminder_hook.py"
          }
        ],
        "matcher": "Edit|Write|MultiEdit"
      }
    ]
  }
}
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ:
- **`matcher`** ‚Äî —Ñ–∏–ª—å—Ç—Ä: —Ö—É–∫ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π `Edit`, `Write` –∏–ª–∏ `MultiEdit`
- **`${CLAUDE_PLUGIN_ROOT}`** ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –∫–æ—Ç–æ—Ä–∞—è —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø–∞–ø–∫—É –ø–ª–∞–≥–∏–Ω–∞ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ—ë –≤—Å–µ–≥–¥–∞ –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç–∏)

### –®–∞–≥ 4: –•—É–∫–∏ –∏–∑ –ø–ª–∞–≥–∏–Ω–∞ Hookify

–ü–ª–∞–≥–∏–Ω **Hookify** ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ö—É–∫–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ—Å—Ç—ã–µ `.local.md` —Ñ–∞–π–ª—ã. –í–æ—Ç –ø—Ä–∏–º–µ—Ä –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –æ–ø–∞—Å–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã `rm`:

```markdown
---
name: block-dangerous-rm
enabled: true
event: bash
pattern: rm\s+-rf
action: block
---

‚ö†Ô∏è **–û–ø–∞—Å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ rm –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞!**

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å –≤–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—É—Ç—å —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è
```

–ê –≤–æ—Ç –ø—Ä–∏–º–µ—Ä —Ö—É–∫–∞, –∫–æ—Ç–æ—Ä—ã–π —Ç—Ä–µ–±—É–µ—Ç –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø–µ—Ä–µ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º:

```markdown
---
name: require-tests-run
enabled: false
event: stop
action: block
conditions:
  - field: transcript
    operator: not_contains
    pattern: npm test|pytest|cargo test
---

**–¢–µ—Å—Ç—ã –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã!**

–ü–µ—Ä–µ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç.
```

Hookify –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è: `PreToolUse`, `PostToolUse`, `Stop`, `UserPromptSubmit`.

## –ú–∞—Ç—á–µ—Ä—ã (Matchers) ‚Äî —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è —Ö—É–∫–æ–≤

**–ú–∞—Ç—á–µ—Ä** ‚Äî —ç—Ç–æ —Ñ–∏–ª—å—Ç—Ä, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–æ–≥–¥–∞ –∏–º–µ–Ω–Ω–æ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç —Ö—É–∫:

```json
"matcher": "Write"           // –¢–æ–ª—å–∫–æ –¥–ª—è –∑–∞–ø–∏—Å–∏ —Ñ–∞–π–ª–æ–≤
"matcher": "Read|Write|Edit" // –î–ª—è —á—Ç–µ–Ω–∏—è, –∑–∞–ø–∏—Å–∏ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
"matcher": "Bash"            // –¢–æ–ª—å–∫–æ –¥–ª—è bash-–∫–æ–º–∞–Ω–¥
"matcher": "*"               // –î–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
"matcher": "mcp__.*"         // –î–ª—è –≤—Å–µ—Ö MCP-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
```

## –í–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å

‚ö†Ô∏è **–•—É–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Å—Å–∏–∏.** –ï—Å–ª–∏ –≤—ã –∏–∑–º–µ–Ω–∏–ª–∏ —Ö—É–∫, –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Claude Code, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—Å—Ç—É–ø–∏–ª–∏ –≤ —Å–∏–ª—É.

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
```bash
claude --debug
```

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ö—É–∫–∏ –º–æ–∂–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π `/hooks` –≤–Ω—É—Ç—Ä–∏ Claude Code.

## –ò—Ç–æ–≥–∏ —É—Ä–æ–∫–∞

- **–•—É–∫–∏** ‚Äî —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç—ã Claude Code
- –°—É—â–µ—Å—Ç–≤—É—é—Ç **–∫–æ–º–∞–Ω–¥–Ω—ã–µ** (—Å–∫—Ä–∏–ø—Ç—ã) –∏ **–ø—Ä–æ–º–ø—Ç-—Ö—É–∫–∏** (–Ω–∞ –æ—Å–Ω–æ–≤–µ –ò–ò)
- –•—É–∫–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç **–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ–ø–∞—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**, **–ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞** –∏ **–¥–æ–±–∞–≤–ª—è—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç**
- **–ú–∞—Ç—á–µ—Ä—ã** —Ñ–∏–ª—å—Ç—Ä—É—é—Ç, –¥–ª—è –∫–∞–∫–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç —Ö—É–∫
- –ü–ª–∞–≥–∏–Ω **Hookify** –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ö—É–∫–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ—Å—Ç—ã–µ Markdown-—Ñ–∞–π–ª—ã
- –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `${CLAUDE_PLUGIN_ROOT}` –¥–ª—è –ø—É—Ç–µ–π –≤ –ø–ª–∞–≥–∏–Ω–∞—Ö
